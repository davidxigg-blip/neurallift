<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GymTrack Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #050505; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        // Importaciones de Firebase desde CDN
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInAnonymously, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB5TTnMn1co3GA_oX3jrZ5KZ8KzRbXbhGQ",
            authDomain: "gym-pro-4588d.firebaseapp.com",
            projectId: "gym-pro-4588d",
            storageBucket: "gym-pro-4588d.firebasestorage.app",
            messagingSenderId: "177629353240",
            appId: "1:177629353240:web:3a7b3f73d05c9468347a6d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const { useState, useEffect } = React;

        // --- COMPONENTES ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const ref = React.useRef(null);
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons({
                        attrs: { class: className, "stroke-width": 2.5 },
                        nameAttr: 'data-lucide'
                    });
                }
            }, [name]);
            return <i data-lucide={name} style={{width: size, height: size}} className={className}></i>;
        };

        function App() {
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const unsub = onAuthStateChanged(auth, (u) => {
                    setUser(u);
                    setLoading(false);
                });
                return () => unsub();
            }, []);

            if (loading) return (
                <div className="h-screen flex flex-col items-center justify-center bg-black text-lime-400">
                    <div className="animate-spin mb-4"><Icon name="loader" size={40} /></div>
                    <p className="text-[10px] font-black uppercase tracking-widest">Iniciando Sistema</p>
                </div>
            );

            if (!user) return <AuthScreen />;

            return (
                <div className="min-h-screen text-white p-6">
                    <header className="flex justify-between items-center mb-10">
                        <div className="flex items-center gap-2">
                            <div className="bg-lime-400 p-2 rounded-lg text-black">
                                <Icon name="zap" />
                            </div>
                            <h1 className="text-2xl font-black italic tracking-tighter">GYMTRACK</h1>
                        </div>
                        <button onClick={() => signOut(auth)} className="p-2 bg-zinc-900 rounded-full text-zinc-500">
                            <Icon name="log-out" />
                        </button>
                    </header>

                    <div className="bg-zinc-900/50 border border-zinc-800 p-8 rounded-[2.5rem] text-center space-y-4">
                        <div className="inline-block p-4 bg-lime-400/10 rounded-full text-lime-400">
                            <Icon name="user" size={32} />
                        </div>
                        <h2 className="text-xl font-bold">¡Bienvenido!</h2>
                        <p className="text-zinc-500 text-sm">Tu sesión como <b>{user.isAnonymous ? 'Invitado' : user.email}</b> está activa.</p>
                        <div className="pt-4">
                            <span className="text-[10px] bg-zinc-800 px-3 py-1 rounded-full text-zinc-400 uppercase font-black">ID: {user.uid.slice(0,8)}</span>
                        </div>
                    </div>

                    <nav className="fixed bottom-8 left-1/2 -translate-x-1/2 w-[85%] bg-zinc-900/90 backdrop-blur-xl border border-white/5 p-4 rounded-full flex justify-around shadow-2xl">
                        <Icon name="layout-dashboard" className="text-lime-400" />
                        <Icon name="history" className="text-zinc-600" />
                        <Icon name="plus-circle" className="text-zinc-600" />
                        <Icon name="settings" className="text-zinc-600" />
                    </nav>
                </div>
            );
        }

        function AuthScreen() {
            return (
                <div className="h-screen flex items-center justify-center p-6 bg-[#050505]">
                    <div className="w-full max-w-sm bg-zinc-900/30 border border-zinc-800 p-10 rounded-[3rem] text-center space-y-8">
                        <Icon name="zap" size={48} className="text-lime-400 mx-auto" />
                        <div>
                            <h1 className="text-3xl font-black italic tracking-tighter text-white">GYMTRACK</h1>
                            <p className="text-zinc-600 text-xs font-bold uppercase tracking-widest mt-2">Elite Performance</p>
                        </div>
                        <button 
                            onClick={() => signInAnonymously(auth)}
                            className="w-full bg-lime-400 text-black p-5 rounded-3xl font-black italic text-lg hover:scale-[1.02] transition-transform"
                        >
                            ENTRAR AHORA
                        </button>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
